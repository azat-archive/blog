{% extends 'BlogWebBundle::layout.html.twig' %}

{% block content %}
	<div id="posts">
	{% for post in posts %}
		<div class="post">
			<a name="pid_{{ post.id }}"></a>
			<a class="title" href="{{ path('_posts_show', { 'pid': post.id }) }}">{{ post }}</a>
			{# @todo add substr method #}
			<p class="content">{{ post.content|truncate(250)|nl2br }}</p>
			<p class="author">{{ post.user }}</p>
			
			<div class="actions">
				<a href="{{ path('_posts_show_comments', { 'pid': post.id }) }}">Comments</a>
				{% if post.canEdit(user) %}
				<a href="{{ path('_posts_edit', { 'pid': post.id }) }}">Edit</a>
				{% endif %}
				{% if post.canDelete(user) %}
				<a href="{{ path('_posts_delete', { 'pid': post.id }) }}">Delete</a>
				{% endif %}
			</div>
		</div>
	{% else %}
		<h3 class="empty">No posts</h3>
	{% endfor %}
	</div>
{% endblock %}